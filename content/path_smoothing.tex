\chapter{Path Smoothing}

\paragraph{Obstacle Term}
This term penalizes collisions with obstacles.

\[P_{obs} = w_{obs} \displaystyle\sum_{i=1}^{N} \sigma_{obs}(|\bldx_i-\bldo_i|-d_{max})\]

\begin{itemize}
\item $\bldo_i$ the location of the closest obstacle to $\bldx_i$
\item $\bldx_i$ the location of a vertex on the path
\item $d_{max}$ the maximum road width
\item $w_{obs}$ the obstacle weight
\item $\sigma_{obs}$ penalty function
\end{itemize}

\paragraph{Curvature Term}
This term upper-bounds the instantaneous curvature of the path at every node, ensuring driveability.

\[ P_{cur} = w_{cur} \displaystyle\sum_{i=1}^{N-1} \sigma_{cur}\left(\frac{\Delta\phi_i}{|\Delta\bldx_i|} - \kappa_{max}\right)\]

\begin{itemize}
\item $\Delta\bldx_i = \bldx_i - \bldx_{i-1}$ the displacement vector at the vertex $\bldx_i$
\item $\Delta\phi_i$ = $|\arctan\frac{\Delta y_{i+1}}{\Delta x_{i+1}} - \arctan\frac{\Delta y_{i}}{\Delta x_{i}}|$ the change in tangential angle at the vertex $\bldx_i$
\item $\kappa_{max}$ the maximum allowable curvature
\item $w_{cur}$ the curvature weight
\item $\sigma_{cur}$ penalty function
\end{itemize}

\paragraph{Smoothness Term}
This term is a measure of the smoothness of the path.

\[ P_{smo} = w_{smo} \displaystyle\sum_{i=1}^{N-1} (\Delta\bldx_{i+1} - \Delta\bldx_i)^2\]

\begin{itemize}
\item $\Delta\bldx_i = \bldx_i - \bldx_{i-1}$ the displacement vector at the vertex $\bldx_i$
\item $w_{smo}$ the smoothness weight
\end{itemize}

\paragraph{Voronoi Term}
This term guides the smoother away from obstacles.

\[ P_{vor} = w_{vor} \displaystyle\sum_{i=1}^{N} \left(\frac{\alpha}{\alpha + d_{obs}(x,y)}\right)\left(\frac{d_{vor}(x,y)}{d_{obs} + d_{vor}(x,y)}\right)\left(\frac{(d_{obs}(x,y) - d_{obs_{max}})^2}{(d_{obs_{max}})^2}\right)\]

\begin{itemize}
\item $d_{obs}$ the distance to the nearest obstacle
\item $d_{edg}$ the distance to the nearest edge of the GVD
\item $\alpha$ controls the falloff rate of the field
\item $w_{vor}$ the Voronoi weight
\end{itemize}